(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[1],{b5cc:function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.list?s("q-infinite-scroll",{attrs:{offset:250},on:{load:t.onLoad},scopedSlots:t._u([{key:"loading",fn:function(){return[s("div",{staticClass:"row justify-center q-my-md"},[s("q-spinner-dots",{attrs:{color:"primary",size:"40px"}})],1)]},proxy:!0}],null,!1,3159847669)},[s("div",{staticClass:"q-pa-sm row q-gutter-md justify-center"},t._l(t.items,(function(e){return s("q-card",{key:e.id,staticClass:"col-xs-11",attrs:{to:"/item/"+e.id}},[s("q-card-section",{attrs:{horizontal:""}},[s("q-img",{staticClass:"col-2",attrs:{src:e.image+"~list",height:"70px"},on:{click:function(s){return t.to(e.id)}}}),s("q-card-section",{staticStyle:{width:"100%"},on:{click:function(s){return t.to(e.id)}}},[t._v("\n          "+t._s(e.desc)+"\n        ")]),t.me?s("q-card-actions",{staticClass:"justify-around",attrs:{vertical:""}},[s("q-btn-dropdown",{staticClass:"q-ma-sm",staticStyle:{width:"80px"},attrs:{color:"red",label:t.$t("userItem.delete")}},[s("q-list",[s("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:function(s){return t.deleteItem(e.id)}}},[s("q-item-section",[s("q-item-label",[t._v(t._s(t.$t("userItem.deleteConfirm")))])],1)],1)],1)],1)],1):t._e()],1)],1)})),1)]):s("q-infinite-scroll",{attrs:{offset:250},on:{load:t.onLoad},scopedSlots:t._u([{key:"loading",fn:function(){return[s("div",{staticClass:"row justify-center q-my-md"},[s("q-spinner-dots",{attrs:{color:"primary",size:"40px"}})],1)]},proxy:!0}])},[s("div",{staticClass:"q-pa-md row q-gutter-md justify-center"},t._l(t.items,(function(e){return s("q-card",{key:e.id,staticClass:"col-xs-11 col-sm-5 col-md-3 col-xl-2 qr-card"},[s("router-link",{attrs:{to:"/item/"+e.id}},[s("q-img",{attrs:{src:e.image+"~list",ratio:"1",transition:"jump-up",basic:""}})],1),s("q-card-section",[s("div",{staticStyle:{"text-overflow":"ellipsis",overflow:"hidden"}},[s("q-item-label",{attrs:{caption:""}},[t._v(t._s(e.desc))])],1)])],1)})),1)])},a=[],o=(s("20d6"),s("df96")),n={name:"ItemCollection",props:{list:{type:Boolean,default:!1},me:{type:Boolean,default:!1},user:{type:String,default:null}},data:function(){return{submitting:!1,items:[],page:1}},methods:{onLoad:function(t,e){var s=this,i={page:t};this.me?i.me=!0:this.user&&(i.user=this.user),this.$axios.get("/api/item/list",{params:i}).then((function(t){var i=t.data.code;if(i===o["a"].SUCCESS){var a=t.data.data;a.length>0?(s.items=s.items.concat(a),e(!1)):e(!0)}else s.$q.notify({message:s.$t("notify.error"),color:"red"}),e(!0)})).catch((function(){s.$q.notify({message:s.$t("notify.error"),color:"red"}),e(!0)}))},deleteItem:function(t){var e=this;this.submitting||(this.submitting=!0,this.$axios.delete("/api/item",{data:{id:t}}).then((function(s){e.submitting=!1;var i=s.data.code;i===o["a"].SUCCESS?(e.items.splice(e.items.findIndex((function(e){return e.id===t})),1),e.$q.notify({message:e.$t("userItem.deleteSuccess"),color:"green"})):e.$q.notify({message:e.$t("notify.error"),color:"red"})})).catch((function(){e.errors={},e.submitting=!1,e.$q.notify({message:e.$t("notify.error"),color:"red"})})))},to:function(t){this.$router.push("/item/"+t)}}},r=n,c=s("2877"),l=s("eebe"),u=s.n(l),m=s("ef35"),d=s("f09f"),p=s("a370"),f=s("068f"),q=s("4b7e"),h=s("f20b"),g=s("1c1c"),y=s("66e5"),v=s("4074"),b=s("0170"),$=s("9c40"),C=s("8380"),w=s("7f67"),Q=Object(c["a"])(r,i,a,!1,null,null,null);e["a"]=Q.exports;u()(Q,"components",{QInfiniteScroll:m["a"],QCard:d["a"],QCardSection:p["a"],QImg:f["a"],QCardActions:q["a"],QBtnDropdown:h["a"],QList:g["a"],QItem:y["a"],QItemSection:v["a"],QItemLabel:b["a"],QBtn:$["a"],QSpinnerDots:C["a"]}),u()(Q,"directives",{ClosePopup:w["a"]})},d843:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"q-pa-md"},[s("div",{staticClass:"column items-center"},[s("div",{staticClass:"col q-gutter-md"},[null!=t.user&&"/me"===this.$router.currentRoute.path?s("div",{staticClass:"row"},[s("q-btn",{staticClass:"q-ma-sm",attrs:{color:"primary",label:t.$t("upload.title"),to:"/upload"}}),s("q-btn-dropdown",{staticClass:"q-ma-sm",attrs:{color:"grey-5",label:t.$t("account.signOut")}},[s("q-list",[s("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:t.logout}},[s("q-item-section",[s("q-item-label",[t._v(t._s(t.$t("account.signOutConfirm")))])],1)],1)],1)],1)],1):t._e()])]),s("item-collection",{attrs:{list:!0,me:"/me"===this.$router.currentRoute.path,user:this.$route.params.name}})],1)},a=[],o=(s("a481"),s("7f7f"),s("b5cc")),n={name:"User",components:{ItemCollection:o["a"]},data:function(){return{user:this.$store.state.account.user}},activated:function(){this.$route.params.name&&this.$store.commit("global/updateBarTitle",this.$route.params.name)},methods:{logout:function(){this.$store.dispatch("account/signOut"),this.$router.replace("/",(function(){})),this.$q.notify({message:this.$t("account.signOutTip"),color:"yellow"})}}},r=n,c=s("2877"),l=s("eebe"),u=s.n(l),m=s("9c40"),d=s("f20b"),p=s("1c1c"),f=s("66e5"),q=s("4074"),h=s("0170"),g=s("7f67"),y=Object(c["a"])(r,i,a,!1,null,"7ac82c63",null);e["default"]=y.exports;u()(y,"components",{QBtn:m["a"],QBtnDropdown:d["a"],QList:p["a"],QItem:f["a"],QItemSection:q["a"],QItemLabel:h["a"]}),u()(y,"directives",{ClosePopup:g["a"]})}}]);